### Dev HTTP collection for all endpoints (use environment `dev` from http-client.env.json)

# 1) Routes overview
GET http://{{url}}/routes

###
# 2) Security - register a new user (returns token + username). Save token to use protected endpoints.
POST http://{{url}}/auth/register
Content-Type: application/json

{
  "username": "user1",
  "password": "password1"
}

###
# 3) Security - login (returns token + username)
POST http://{{url}}/auth/login
Content-Type: application/json

{
  "username": "user1",
  "password": "password1"
}

###
# 4) Public auth test (no auth)
GET http://{{url}}/auth/test

###
# 5) Protected endpoint - user demo (requires Bearer token)
GET http://{{url}}/protected/user_demo
Authorization: Bearer {{jwt_token}}

###
# 6) Add role to authenticated user (requires USER role). Body: {"role":"<roleName>"} (case-insensitive)
POST http://{{url}}/auth/user/addrole
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "role": "admin"
}

###
# 7) Protected endpoint - admin demo (requires ADMIN role)
GET http://{{url}}/protected/admin_demo
Authorization: Bearer {{jwt_token}}

###
# Reports - top candidates by popularity (ANYONE)
GET http://{{url}}/reports/candidates/top-by-popularity

###
# Populate database with sample candidates and skills
GET http://{{url}}/candidates/populate
Accept: application/json

###
# 8) Candidate - create (ANYONE)
POST http://{{url}}/candidates
Content-Type: application/json

{
  "name": "Example Candidate",
  "phone": "55566677",
  "education": "MSc Computer Science",
  "skills": []
}

###
# 9) Candidate - read all (ANYONE)
GET http://{{url}}/candidates

###
# 10) Candidate - read by id (ANYONE)
# Replace {{candidateId}} with the id from create/readAll responses
### Test variables
@candidateId = 3
@skillId = 4

GET http://{{url}}/candidates/{{candidateId}}

###
# 11) Candidate - update (ANYONE)
PUT http://{{url}}/candidates/{{candidateId}}
Content-Type: application/json

{
  "name": "Example Candidate",
  "phone": "87654321",
  "education": "PhD Computer Science",
  "skills": []
}

###
# 12) Candidate - delete (ANYONE)
DELETE http://{{url}}/candidates/{{candidateId}}

###
# 13) Candidate - link existing skill to candidate (idempotent, ANYONE)
# Replace {{skillId}} with a real skill id (from DB or populator). If none exist, run your data populator or insert skills directly.
PUT http://{{url}}/candidates/{{candidateId}}/skills/{{skillId}}

###
# 14) Candidate - filter by skill category (ANYONE)
# Examples: PROG_LANG, DB, DEVOPS, FRONTEND, TESTING, DATA, FRAMEWORK
@category = PROG_LANG
GET http://{{url}}/candidates/filter?category={{category}}

###